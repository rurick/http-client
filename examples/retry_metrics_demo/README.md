# üîÑ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö Retry –ú–µ—Ç—Ä–∏–∫

–≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∑–∞–ø–∏—Å—å retry –º–µ—Ç—Ä–∏–∫ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä—É—á–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è.

## –ó–∞–ø—É—Å–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ test_server** (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ):
   ```bash
   cd examples/test_server
   go run main.go
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é**:
   ```bash
   cd examples/retry_metrics_demo
   go run main.go
   ```

## –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç—Ä–∏ —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–æ–≤:

1. **500 –æ—à–∏–±–∫–∞** - –≤—ã–∑—ã–≤–∞–µ—Ç retry –ø–æ–ø—ã—Ç–∫–∏
2. **503 –æ—à–∏–±–∫–∞** - –≤—ã–∑—ã–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ retry –ø–æ–ø—ã—Ç–∫–∏  
3. **200 —É—Å–ø–µ—Ö** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç retry

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏

Retry –º–µ—Ç—Ä–∏–∫–∏ **–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –∫–∞–∂–¥–æ–π retry –ø–æ–ø—ã—Ç–∫–µ:

```prometheus
# –ü—Ä–∏–º–µ—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫
http_retries_total{method="GET",url="http://localhost:5000/test/status/500",attempt="2",success="false"} 1
http_retries_total{method="GET",url="http://localhost:5000/test/status/500",attempt="3",success="true"} 1
```

## –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ç—Ä–∏–∫

–í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ Prometheus —Ñ–æ—Ä–º–∞—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É:
**http://localhost:5000/metrics**

## –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å** - –Ω–µ –Ω—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å `RecordRetry()` –≤—Ä—É—á–Ω—É—é  
‚úÖ **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** - –º–µ—Ç–æ–¥, URL, –Ω–æ–º–µ—Ä –ø–æ–ø—ã—Ç–∫–∏, —É—Å–ø–µ—à–Ω–æ—Å—Ç—å  
‚úÖ **OpenTelemetry –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –º–µ—Ç—Ä–∏–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è  
‚úÖ **Prometheus —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –≥–æ—Ç–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞